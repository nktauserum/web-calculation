# Агент

Агент - это микросервис-вычислитель, который выполняет атомарные математические операции.

## Основные функции

1. Получение задач от оркестратора
2. Выполнение математических операций
3. Отправка результатов вычислений обратно оркестратору

## Принцип работы

1. При запуске агент создает пул воркеров (горутин) согласно значению COMPUTING_POWER
2. Каждый воркер циклически:
   - Запрашивает задачу у оркестратора (GET http://localhost:8080/internal/task)
   - При получении задачи выполняет вычисление
   - Отправляет результат оркестратору (POST http://localhost:8080/internal/task)

## Конфигурация

### Переменные среды

- COMPUTING_POWER - количество воркеров (по умолчанию 1)
- TIME_ADDITION_MS - время выполнения операции сложения в миллисекундах
- TIME_SUBTRACTION_MS - время выполнения операции вычитания в миллисекундах
- TIME_MULTIPLICATIONS_MS - время выполнения операции умножения в миллисекундах
- TIME_DIVISIONS_MS - время выполнения операции деления в миллисекундах

## API взаимодействие

### Получение задачи

GET http://localhost:8080/internal/task

Возможные ответы:

- 200 - задача получена
- 204 - нет доступных задач
- 500 - ошибка сервера

### Отправка результата

POST http://localhost:8080/internal/task
Content-Type: application/json

```json
{
"id": <task_id>,
"result": <calculation_result>
}
```

Возможные ответы:

- 200 - результат принят
- 404 - задача не найдена
- 422 - невалидные данные
- 500 - ошибка сервера
